{
  "version": 3,
  "sources": ["../keystone.ts", "../schema/Product.schema.ts", "../auth/access.ts", "../schema/Category.schema.ts", "../schema/User.schema.ts", "../schema/Role.schema.ts", "../schema/Order.schema.ts", "../schema/Cart.schema.ts", "../schema/Invoice.schema.ts", "../schema/CartDetail.schema.ts", "../schema/Post.schema.ts", "../schema/Feedback.schema.ts", "../schema/index.ts", "../auth.ts"],
  "sourcesContent": ["// Welcome to Keystone!\r\n//\r\n// This file is what Keystone uses as the entry-point to your headless backend\r\n//\r\n// Keystone imports the default export of this file, expecting a Keystone configuration object\r\n//   you can find out more at https://keystonejs.com/docs/apis/config\r\n\r\nimport { config } from \"@keystone-6/core\";\r\n\r\nimport { lists } from \"./schema/index\";\r\n\r\n// authentication is configured separately here too, but you might move this elsewhere\r\n// when you write your list-level access control functions, as they typically rely on session data\r\nimport { withAuth, session } from \"./auth\";\r\n\r\nexport default withAuth(\r\n  config({\r\n    server: {\r\n      cors: {\r\n        origin: \"http://localhost:5173\",\r\n      },\r\n    },\r\n    db: {\r\n      // we're using sqlite for the fastest startup experience\r\n      //   for more information on what database might be appropriate for you\r\n      //   see https://keystonejs.com/docs/guides/choosing-a-database#title\r\n      provider: \"sqlite\",\r\n      url: \"file:./keystone.db\",\r\n      // onConnect: async (session) => {\r\n      //   console.log({ session });\r\n      // },\r\n    },\r\n    lists,\r\n    session,\r\n  })\r\n);\r\n", "import { list } from \"@keystone-6/core\";\r\nimport { allowAll } from \"@keystone-6/core/access\";\r\nimport { text, relationship, integer } from \"@keystone-6/core/fields\";\r\nimport { cloudinaryImage } from \"@keystone-6/cloudinary\";\r\nimport \"dotenv/config\";\r\nimport { permissions } from \"../auth/access\";\r\n\r\nexport const cloudinary = {\r\n  cloudName: process.env.CLOUDINARY_CLOUD_NAME ?? \"\",\r\n  apiKey: process.env.CLOUDINARY_API_KEY ?? \"\",\r\n  apiSecret: process.env.CLOUDINARY_API_SECRET ?? \"\",\r\n  folder: `/${process.env.CLOUDINARY_FOLDER ?? \"little_angle_mart\"}`,\r\n};\r\n\r\nconst Product = list({\r\n  access: {\r\n    operation: {\r\n      query: allowAll,\r\n      update: permissions.canManageProducts,\r\n      delete: permissions.canManageProducts,\r\n      create: permissions.canManageProducts,\r\n    },\r\n  },\r\n\r\n  ui: {\r\n    hideCreate: (args) => {\r\n      console.log({ args });\r\n      console.log(args.session.data);\r\n\r\n      return !permissions.canManageProducts(args);\r\n    },\r\n    // hideCreate: (args) => !permissions.canManageProducts(args),\r\n    hideDelete: (args) => !permissions.canManageProducts(args),\r\n  },\r\n\r\n  fields: {\r\n    name: text({\r\n      label: \"T\u00EAn s\u1EA3n ph\u1EA9m\",\r\n      validation: {\r\n        isRequired: true,\r\n      },\r\n      hooks: {\r\n        validateInput: async ({\r\n          resolvedData, //X\u1EED l\u00FD input data\r\n          addValidationError,\r\n          context,\r\n          item,\r\n        }) => {\r\n          //N\u1EBFu productName \u0111\u00E3 t\u1ED3n t\u1EA1i\r\n          if (resolvedData.name) {\r\n            const existingProducts = await context.query.Product.findMany({\r\n              where: { name: { equals: resolvedData.name } },\r\n              query: \"id\",\r\n            });\r\n\r\n            if (existingProducts.length > 0) {\r\n              addValidationError(\"T\u00EAn s\u1EA3n ph\u1EA9m \u0111\u00E3 t\u1ED3n t\u1EA1i.\");\r\n            }\r\n          }\r\n        },\r\n      },\r\n    }),\r\n    productDescription: text({\r\n      label: \"Mi\u00EAu t\u1EA3 v\u1EC1 s\u1EA3n ph\u1EA9m\",\r\n    }),\r\n    category: relationship({\r\n      label: \"Nh\u00F3m s\u1EA3n ph\u1EA9m\",\r\n      ref: \"Category\",\r\n    }),\r\n    productPrice: integer({\r\n      label: \"Gi\u00E1 s\u1EA3n ph\u1EA9m\",\r\n      validation: { isRequired: true },\r\n    }),\r\n    productImage: cloudinaryImage({\r\n      label: \"H\u00ECnh \u1EA3nh s\u1EA3n ph\u1EA9m\",\r\n      cloudinary,\r\n    }),\r\n  },\r\n});\r\n\r\nexport default Product;\r\n", "// M\u1ED9t object Session: data l\u00E0 b\u1ED9 data \u0111\u01B0\u1EE3c database tr\u1EA3 v\u1EC1\r\nexport type Session = {\r\n  itemId: string;\r\n  listKey: string;\r\n  data: {\r\n    name: string;\r\n    role: {\r\n      id: string;\r\n      name: string;\r\n      canManageProducts: boolean;\r\n      canManageUser: boolean;\r\n      canManagerPost: boolean;\r\n    };\r\n  };\r\n};\r\n\r\n// M\u1ED9t object n\u1EBFu c\u00F3 th\u00EC ph\u1EA3i c\u00F3 ki\u1EC3u l\u00E0 session\r\n// M\u1ED9t object ch\u1EE9a thu\u1ED9c t\u00EDnh session ki\u1EC3u Session\r\ntype AccessArgs = {\r\n  session?: Session;\r\n};\r\n\r\n// H\u00E0m nh\u1EADn m\u1ED9t AccessArgs l\u00E0 m\u1ED9t object b\u1EF1, v\u00E0 c\u00F3 m\u1ED9t key session \u0111\u01B0\u1EE3c \u0111\u1ECBnh ngh\u0129a trong \u0111\u00F3\r\n// N\u1EBFu session trong AccessArgs true ngh\u0129a l\u00E0 ng\u01B0\u1EDDi d\u00F9ng \u0111\u00E3 \u0111\u0103ng nh\u1EADp r\u1ED3i h\u00E0m return v\u1EC1 true\r\nexport function isSignedIn({ session }: AccessArgs) {\r\n  // console.log({ session });\r\n\r\n  return Boolean(session);\r\n}\r\n\r\n/*\r\n    Permissions are shorthand functions for checking that the current user's role has the specified\r\n    permission boolean set to true\r\n  */\r\n// permisssion ki\u1EC3m tra c\u00E1c quy\u1EC1n c\u1EE5 th\u1EC3 CRUD\r\n// M\u1ED9t object permissions ch\u1EE9 c\u00E1c function\r\n// c\u00E1c function \u0111\u01B0\u1EE3c truy\u1EC1n v\u00E0o 1 tham s\u1ED1 trong \u0111\u00F3 c\u00F3 key l\u00E0 session\r\nexport const permissions = {\r\n  canManageProducts: ({ session }: AccessArgs) =>\r\n    session?.data.role?.canManageProducts ?? false,\r\n  canManageUser: ({ session }: AccessArgs) =>\r\n    session?.data.role?.canManageUser ?? false,\r\n  canManagerPost: ({ session }: AccessArgs) =>\r\n    session?.data.role?.canManagerPost ?? false,\r\n};\r\n\r\n/*\r\n    Rules are logical functions that can be used for list access, and may return a boolean (meaning\r\n    all or no items are available) or a set of filters that limit the available items\r\n  */\r\n// Ki\u1EC3m tra vai tr\u00F2 c\u1EE7a user c\u00F3 \u0111\u01B0\u1EE3c truy c\u1EADp hay ko\r\nexport const rules = {\r\n  canReadPeople: ({ session }: AccessArgs) => {\r\n    if (!session) return false;\r\n\r\n    // Ki\u1EC3m tra c\u00F3 ch\u1EC9nh s\u1EEDa \u0111c user hay kh d\u1EF1a tr\u00EAn canManageUser\r\n    if (session.data.role?.canManageUser) return true;\r\n\r\n    // N\u1EBFu kh c\u00F3 trong 2 tr\u01B0\u1EDDng h\u1EE3p tr\u00EAn, ch\u1EC9nh v\u1EC1 m\u1EB7c \u0111\u1ECBnh xem \u0111\u01B0\u1EE3c ch\u00EDnh m\u00ECnh\r\n    return { id: { equals: session.itemId } };\r\n  },\r\n};\r\n", "import { list } from \"@keystone-6/core\";\r\nimport { allowAll } from \"@keystone-6/core/access\";\r\nimport { text } from \"@keystone-6/core/fields\";\r\nimport { permissions } from \"../auth/access\";\r\n\r\nconst Category = list({\r\n  access: {\r\n    operation: {\r\n      query: allowAll,\r\n      update: permissions.canManageProducts,\r\n      delete: permissions.canManageProducts,\r\n      create: permissions.canManageProducts,\r\n    },\r\n  },\r\n\r\n  ui: {\r\n    hideCreate: (args) => !permissions.canManageProducts(args),\r\n    hideDelete: (args) => !permissions.canManageProducts(args),\r\n  },\r\n\r\n  fields: {\r\n    name: text({\r\n      label: \"Lo\u1EA1i s\u1EA3n ph\u1EA9m\",\r\n      validation: { isRequired: true },\r\n    }),\r\n  },\r\n});\r\n\r\nexport default Category;\r\n", "import { list } from \"@keystone-6/core\";\r\nimport { allOperations, allowAll } from \"@keystone-6/core/access\";\r\nimport { password, relationship, text } from \"@keystone-6/core/fields\";\r\nimport { permissions, rules, isSignedIn } from \"../auth/access\";\r\n\r\nconst User = list({\r\n  access: {\r\n    operation: {\r\n      // ...allOperations(isSignedIn),\r\n      query: isSignedIn,\r\n      create: allowAll,\r\n      update: allowAll,\r\n      delete: allowAll,\r\n    },\r\n    filter: {\r\n      query: rules.canReadPeople,\r\n    },\r\n  },\r\n\r\n  ui: {\r\n    hideCreate: (args) => !permissions.canManageUser(args),\r\n    hideDelete: (args) => !permissions.canManageUser(args),\r\n  },\r\n\r\n  fields: {\r\n    name: text({\r\n      label: \"T\u00EAn\",\r\n      validation: { isRequired: true },\r\n    }),\r\n    userEmail: text({\r\n      label: \"Email\",\r\n      validation: {\r\n        isRequired: true,\r\n        match: {\r\n          regex: /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/,\r\n          explanation: \"Email kh\u00F4ng h\u1EE3p l\u1EC7\",\r\n        },\r\n      },\r\n      isIndexed: \"unique\",\r\n    }),\r\n    userPassword: password({\r\n      label: \"M\u1EADt kh\u1EA9u\",\r\n      validation: {\r\n        isRequired: true,\r\n        length: { min: 5, max: 20 },\r\n      },\r\n    }),\r\n    userPhone: text({\r\n      label: \"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i\",\r\n      validation: {\r\n        isRequired: true,\r\n        match: {\r\n          regex: /^\\d{10}$/,\r\n          explanation: \"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i ph\u1EA3i c\u00F3 10 s\u1ED1\",\r\n        },\r\n      },\r\n    }),\r\n    userAddress: text({\r\n      label: \"\u0110\u1ECBa ch\u1EC9\",\r\n    }),\r\n    role: relationship({\r\n      label: \"Quy\u1EC1n h\u1EA1n\",\r\n      ref: \"Role.assignedTo\",\r\n      ui: {\r\n        itemView: {\r\n          fieldMode: (args) =>\r\n            permissions.canManageUser(args) ? \"edit\" : \"read\",\r\n        },\r\n      },\r\n    }),\r\n    posts: relationship({\r\n      label: \"B\u00E0i \u0111\u0103ng\",\r\n      ref: \"Post.author\",\r\n      many: true,\r\n    }),\r\n  },\r\n});\r\n\r\nexport default User;\r\n", "import { list } from \"@keystone-6/core\";\r\nimport { allowAll } from \"@keystone-6/core/access\";\r\nimport { checkbox, relationship, text } from \"@keystone-6/core/fields\";\r\nimport { permissions } from \"../auth/access\";\r\n\r\nconst Role = list({\r\n  access: {\r\n    operation: {\r\n      query: allowAll,\r\n      create: permissions.canManageUser,\r\n      update: permissions.canManageUser,\r\n      delete: permissions.canManageUser,\r\n    },\r\n  },\r\n\r\n  ui: {\r\n    hideCreate: (args) => !permissions.canManageUser(args),\r\n    hideDelete: (args) => !permissions.canManageUser(args),\r\n  },\r\n\r\n  fields: {\r\n    name: text({\r\n      label: \"Quy\u1EC1n h\u1EA1n\",\r\n      validation: { isRequired: true },\r\n    }),\r\n    canManageProducts: checkbox({\r\n      label: \"Qu\u1EA3n l\u00FD s\u1EA3n ph\u1EA9m\",\r\n      defaultValue: false,\r\n    }),\r\n    canManageUser: checkbox({\r\n      label: \"Qu\u1EA3n l\u00FD ng\u01B0\u1EDDi d\u00F9ng\",\r\n      defaultValue: false,\r\n    }),\r\n    canManagerPost: checkbox({\r\n      label: \"Qu\u1EA3n l\u00FD b\u00E0i \u0111\u0103ng\",\r\n      defaultValue: false,\r\n    }),\r\n    assignedTo: relationship({\r\n      label: \"Ng\u01B0\u1EDDi d\u00F9ng\",\r\n      ref: \"User.role\",\r\n      many: true,\r\n      ui: {\r\n        itemView: { fieldMode: \"read\" },\r\n      },\r\n    }),\r\n  },\r\n});\r\n\r\nexport default Role;\r\n", "import { list } from \"@keystone-6/core\";\r\nimport { allowAll } from \"@keystone-6/core/access\";\r\nimport { integer, timestamp } from \"@keystone-6/core/fields\";\r\nimport { permissions } from \"../auth/access\";\r\n\r\nconst Order = list({\r\n  access: {\r\n    operation: {\r\n      query: allowAll,\r\n      update: permissions.canManageProducts,\r\n      delete: permissions.canManageProducts,\r\n      create: permissions.canManageProducts,\r\n    },\r\n  },\r\n\r\n  ui: {\r\n    hideCreate: (args) => !permissions.canManageProducts(args),\r\n    hideDelete: (args) => !permissions.canManageProducts(args),\r\n  },\r\n\r\n  fields: {\r\n    quantity: integer({\r\n      label: \"S\u1ED1 l\u01B0\u1EE3ng\",\r\n    }),\r\n    createdAt: timestamp({\r\n      label: \"Ng\u00E0y \u0111\u1EB7t\",\r\n      defaultValue: { kind: \"now\" },\r\n    }),\r\n  },\r\n});\r\n\r\nexport default Order;\r\n", "import { list } from \"@keystone-6/core\";\r\nimport { allowAll } from \"@keystone-6/core/access\";\r\nimport { relationship, timestamp } from \"@keystone-6/core/fields\";\r\nimport { permissions } from \"../auth/access\";\r\n\r\nconst Cart = list({\r\n  access: {\r\n    operation: {\r\n      query: allowAll,\r\n      update: permissions.canManageProducts,\r\n      delete: permissions.canManageProducts,\r\n      create: permissions.canManageProducts,\r\n    },\r\n  },\r\n\r\n  ui: {\r\n    hideCreate: (args) => !permissions.canManageProducts(args),\r\n    hideDelete: (args) => !permissions.canManageProducts(args),\r\n  },\r\n\r\n  fields: {\r\n    user: relationship({\r\n      label: \"\u0110\u01A1n h\u00E0ng c\u1EE7a\",\r\n      ref: \"User\",\r\n    }),\r\n    createdAt: timestamp({\r\n      label: \"Ng\u00E0y th\u00EAm v\u00E0o gi\u1ECF h\u00E0ng\",\r\n      defaultValue: { kind: \"now\" },\r\n    }),\r\n  },\r\n});\r\n\r\nexport default Cart;\r\n", "import { list } from \"@keystone-6/core\";\r\nimport { allowAll } from \"@keystone-6/core/access\";\r\nimport { integer, relationship, timestamp } from \"@keystone-6/core/fields\";\r\nimport { permissions } from \"../auth/access\";\r\n\r\nconst Invoice = list({\r\n  access: {\r\n    operation: {\r\n      query: allowAll,\r\n      create: permissions.canManageProducts,\r\n      update: permissions.canManageProducts,\r\n      delete: permissions.canManageProducts,\r\n    },\r\n  },\r\n\r\n  ui: {\r\n    hideCreate: (args) => !permissions.canManageProducts(args),\r\n    hideDelete: (args) => !permissions.canManageProducts(args),\r\n  },\r\n\r\n  fields: {\r\n    price: integer({\r\n      label: \"Gi\u00E1 c\u1EE7a ho\u00E1 \u0111\u01A1n\",\r\n    }),\r\n    creatDate: timestamp({\r\n      label: \"Ng\u00E0y t\u1EA1o ho\u00E1 \u0111\u01A1n\",\r\n    }),\r\n    user: relationship({\r\n      label: \"Ho\u00E1 \u0111\u01A1n c\u1EE7a\",\r\n      ref: \"User\",\r\n    }),\r\n  },\r\n});\r\n\r\nexport default Invoice;\r\n", "import { list } from \"@keystone-6/core\";\r\nimport { allowAll } from \"@keystone-6/core/access\";\r\nimport { integer, relationship } from \"@keystone-6/core/fields\";\r\nimport { permissions } from \"../auth/access\";\r\n\r\nconst CartDetail = list({\r\n  access: {\r\n    operation: {\r\n      query: allowAll,\r\n      create: permissions.canManageProducts,\r\n      update: permissions.canManageProducts,\r\n      delete: permissions.canManageProducts,\r\n    },\r\n  },\r\n\r\n  ui: {\r\n    hideCreate: (args) => !permissions.canManageProducts(args),\r\n    hideDelete: (args) => !permissions.canManageProducts(args),\r\n  },\r\n\r\n  fields: {\r\n    cartId: relationship({\r\n      label: \"Gi\u1ECF h\u00E0ng\",\r\n      ref: \"Cart\",\r\n    }),\r\n    productId: relationship({\r\n      label: \"S\u1EA3n ph\u1EA9m\",\r\n      ref: \"Product\",\r\n      many: true,\r\n    }),\r\n    quantity: integer({\r\n      label: \"S\u1ED1 l\u01B0\u1EE3ng\",\r\n    }),\r\n    price: integer({\r\n      label: \"Gi\u00E1\",\r\n    }),\r\n  },\r\n});\r\n\r\nexport default CartDetail;\r\n", "import { list } from \"@keystone-6/core\";\r\nimport { allowAll } from \"@keystone-6/core/access\";\r\nimport { relationship, text } from \"@keystone-6/core/fields\";\r\nimport { cloudinaryImage } from \"@keystone-6/cloudinary\";\r\nimport { permissions } from \"../auth/access\";\r\nimport \"dotenv/config\";\r\nimport { document } from \"@keystone-6/fields-document\";\r\n\r\nexport const cloudinary = {\r\n  cloudName: process.env.CLOUDINARY_CLOUD_NAME ?? \"\",\r\n  apiKey: process.env.CLOUDINARY_API_KEY ?? \"\",\r\n  apiSecret: process.env.CLOUDINARY_API_SECRET ?? \"\",\r\n  folder: `/${process.env.CLOUDINARY_FOLDER ?? \"little_angle_mart\"}`,\r\n};\r\n\r\nconst Post = list({\r\n  access: {\r\n    operation: {\r\n      query: allowAll,\r\n      update: permissions.canManagerPost,\r\n      delete: permissions.canManagerPost,\r\n      create: permissions.canManagerPost,\r\n    },\r\n  },\r\n\r\n  ui: {\r\n    hideCreate: (args) => !permissions.canManagerPost(args),\r\n    hideDelete: (args) => !permissions.canManagerPost(args),\r\n  },\r\n\r\n  fields: {\r\n    title: text({\r\n      label: \"Ti\u00EAu \u0111\u1EC1\",\r\n    }),\r\n    content: text({\r\n      label: \"N\u1ED9i dung\",\r\n    }),\r\n    link: document({\r\n      label: \"\u0110\u01B0\u1EDDng d\u1EABn b\u00E0i \u0111\u0103ng\",\r\n      links: true,\r\n    }),\r\n    image: cloudinaryImage({\r\n      label: \"H\u00ECnh \u1EA3nh\",\r\n      cloudinary,\r\n    }),\r\n    author: relationship({\r\n      label: \"Ng\u01B0\u1EDDi \u0111\u0103ng\",\r\n      ref: \"User.posts\",\r\n    }),\r\n  },\r\n});\r\n\r\nexport default Post;\r\n", "import { list } from \"@keystone-6/core\";\r\nimport { allowAll } from \"@keystone-6/core/access\";\r\nimport { permissions } from \"../auth/access\";\r\nimport { relationship, text } from \"@keystone-6/core/fields\";\r\n\r\nconst Feedback = list({\r\n  access: {\r\n    operation: {\r\n      query: allowAll,\r\n      create: allowAll,\r\n      update: allowAll,\r\n      delete: allowAll,\r\n    },\r\n  },\r\n\r\n  ui: {\r\n    hideCreate: (args) => !permissions.canManageProducts(args),\r\n    hideDelete: (args) => !permissions.canManageProducts(args),\r\n  },\r\n\r\n  fields: {\r\n    user: relationship({\r\n      label: \"\u0110\u00E1nh gi\u00E1 c\u1EE7a\",\r\n      ref: \"User\",\r\n    }),\r\n    product: relationship({\r\n      label: \"S\u1EA3n ph\u1EA9m\",\r\n      ref: \"Product\",\r\n    }),\r\n    comment: text({\r\n      label: \"\u0110\u00E1nh gi\u00E1\",\r\n    }),\r\n  },\r\n});\r\n\r\nexport default Feedback;\r\n", "import Product from \"./Product.schema\";\r\nimport Category from \"./Category.schema\";\r\nimport User from \"./User.schema\";\r\nimport Role from \"./Role.schema\";\r\nimport Order from \"./Order.schema\";\r\nimport Cart from \"./Cart.schema\";\r\nimport Invoice from \"./Invoice.schema\";\r\nimport CartDetail from \"./CartDetail.schema\";\r\nimport Post from \"./Post.schema\";\r\nimport Feedback from \"./Feedback.schema\";\r\n\r\nexport const lists = {\r\n  Product,\r\n  User,\r\n  Category,\r\n  Role,\r\n  Order,\r\n  Cart,\r\n  Invoice,\r\n  CartDetail,\r\n  Post,\r\n  Feedback,\r\n};\r\n", "// Welcome to some authentication for Keystone\r\n//\r\n// This is using @keystone-6/auth to add the following\r\n// - A sign-in page for your Admin UI\r\n// - A cookie-based stateless session strategy\r\n//    - Using a User email as the identifier\r\n//    - 30 day cookie expiration\r\n//\r\n// This file does not configure what Users can do, and the default for this starter\r\n// project is to allow anyone - logged-in or not - to do anything.\r\n//\r\n// If you want to prevent random people on the internet from accessing your data,\r\n// you can find out how by reading https://keystonejs.com/docs/guides/auth-and-access-control\r\n//\r\n// If you want to learn more about how our out-of-the-box authentication works, please\r\n// read https://keystonejs.com/docs/apis/auth#authentication-api\r\n\r\nimport { randomBytes } from \"crypto\";\r\nimport { createAuth } from \"@keystone-6/auth\";\r\n\r\n// see https://keystonejs.com/docs/apis/session for the session docs\r\nimport { statelessSessions } from \"@keystone-6/core/session\";\r\n\r\n// for a stateless session, a SESSION_SECRET should always be provided\r\n//   especially in production (statelessSessions will throw if SESSION_SECRET is undefined)\r\nlet sessionSecret = process.env.SESSION_SECRET;\r\nif (!sessionSecret && process.env.NODE_ENV !== \"production\") {\r\n  sessionSecret = randomBytes(32).toString(\"hex\");\r\n}\r\n\r\n// withAuth is a function we can use to wrap our base configuration\r\n// Data \u0111c db tr\u1EA3 v\u1EC1 g\u1ED3m listKey, itemId v\u00E0 b\u1ED9 data \u0111\u00EDnh k\u00E8m l\u00E0 sessionData (ph\u1EE5c v\u1EE5 cho vi\u1EC7c auth)\r\nconst { withAuth } = createAuth({\r\n  listKey: \"User\",\r\n  identityField: \"userEmail\",\r\n\r\n  // this is a GraphQL query fragment for fetching what data will be attached to a context.session\r\n  //   this can be helpful for when you are writing your access control functions\r\n  //   you can find out more at https://keystonejs.com/docs/guides/auth-and-access-control\r\n  sessionData: `\r\n    name\r\n    role {\r\n      id\r\n      name\r\n      canManageProducts\r\n      canManageUser\r\n      canManagerPost\r\n    }\r\n  `,\r\n  secretField: \"userPassword\",\r\n\r\n  // WARNING: remove initFirstItem functionality in production\r\n  //   see https://keystonejs.com/docs/config/auth#init-first-item for more\r\n  initFirstItem: {\r\n    // if there are no items in the db, by configuring this field\r\n    //   you are asking the Keystone AdminUI to create a new user\r\n    //   providing inputs for these fields\r\n    fields: [\"name\", \"userEmail\", \"userPassword\", \"userPhone\"],\r\n    itemData: {\r\n      role: {\r\n        create: {\r\n          name: \"Admin\",\r\n          canManageProducts: true,\r\n          canManageUser: true,\r\n          canManagerPost: true,\r\n        },\r\n      },\r\n    },\r\n\r\n    // it uses context.sudo() to do this, which bypasses any access control you might have\r\n    //   you shouldn't use this in production\r\n  },\r\n});\r\n\r\n// statelessSessions uses cookies for session tracking\r\n//   these cookies have an expiry, in seconds\r\n//   we use an expiry of 30 days for this starter\r\nconst sessionMaxAge = 60 * 60 * 24 * 30;\r\n\r\n// you can find out more at https://keystonejs.com/docs/apis/session#session-api\r\nconst session = statelessSessions({\r\n  maxAge: sessionMaxAge,\r\n  secret: sessionSecret!,\r\n});\r\n\r\nexport { withAuth, session };\r\n"],
  "mappings": "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",
  "names": ["import_core", "session", "import_core", "import_access", "import_fields", "import_core", "import_access", "import_fields", "import_core", "import_access", "import_fields", "import_core", "import_access", "import_fields", "import_core", "import_access", "import_fields", "import_core", "import_access", "import_fields", "import_core", "import_access", "import_fields", "import_core", "import_access", "import_fields", "import_cloudinary", "import_config", "cloudinary", "import_core", "import_access", "import_fields"]
}
